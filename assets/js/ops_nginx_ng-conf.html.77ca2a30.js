"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[810],{6262:(n,s)=>{s.A=(n,s)=>{const a=n.__vccOpts||n;for(const[n,e]of s)a[n]=e;return a}},7405:(n,s,a)=>{a.r(s),a.d(s,{comp:()=>p,data:()=>l});var e=a(641);const i={},p=(0,a(6262).A)(i,[["render",function(n,s){return(0,e.uX)(),(0,e.CE)("div",null,s[0]||(s[0]=[(0,e.Fv)('<p>文件目录：<code>[Nginx安装目录]/conf/nginx.conf</code>。<strong>Ngnix 最常用命令：<code>nginx -s reload</code> 刷新配置。</strong></p><h2 id="ngnix-主配置" tabindex="-1"><a class="header-anchor" href="#ngnix-主配置"><span>Ngnix 主配置</span></a></h2><div class="language-config line-numbers-mode" data-highlighter="shiki" data-ext="config" data-title="config" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>#user  root;</span></span>\n<span class="line"><span>worker_processes  4;</span></span>\n<span class="line"><span>worker_cpu_affinity auto;</span></span>\n<span class="line"><span>worker_rlimit_nofile 11000;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>error_log  logs/error.log warn;</span></span>\n<span class="line"><span>pid        logs/nginx.pid;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>events {</span></span>\n<span class="line"><span>    use epoll;</span></span>\n<span class="line"><span>    worker_connections  4096;</span></span>\n<span class="line"><span>    multi_accept on;</span></span>\n<span class="line"><span>}</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span># TCP 代理</span></span>\n<span class="line"><span>#stream {</span></span>\n<span class="line"><span>#</span></span>\n<span class="line"><span>#    upstream redis {</span></span>\n<span class="line"><span>#        server 10.x.x.x:6379;</span></span>\n<span class="line"><span>#    }</span></span>\n<span class="line"><span>#    server {</span></span>\n<span class="line"><span>#        listen     6378;</span></span>\n<span class="line"><span>#        proxy_pass redis;</span></span>\n<span class="line"><span>#    }</span></span>\n<span class="line"><span>#    upstream mysql {</span></span>\n<span class="line"><span>#        server 192.x.x.x:3306;</span></span>\n<span class="line"><span>#    }</span></span>\n<span class="line"><span>#    server {</span></span>\n<span class="line"><span>#        listen     3307;</span></span>\n<span class="line"><span>#        proxy_pass mysql;</span></span>\n<span class="line"><span>#    }</span></span>\n<span class="line"><span>#}</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>http {</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 文件扩展映射</span></span>\n<span class="line"><span>    include       mime.types;</span></span>\n<span class="line"><span>    default_type  application/octet-stream;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 日志格式化</span></span>\n<span class="line"><span>    log_format  main  &#39;$remote_addr - $remote_user [$time_local] &quot;$request&quot; &#39;</span></span>\n<span class="line"><span>                      &#39;$status $body_bytes_sent &quot;$http_referer&quot; &#39;</span></span>\n<span class="line"><span>                      &#39;&quot;$http_user_agent&quot; &quot;$http_x_forwarded_for&quot;&#39;</span></span>\n<span class="line"><span>                      &#39;$upstream_addr $upstream_status $upstream_response_time $request_time&#39;;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 防xss攻击</span></span>\n<span class="line"><span>    add_header X-Frame-Options &quot;SAMEORIGIN&quot;;</span></span>\n<span class="line"><span>    add_header X-XSS-Protection &quot;1; mode=block&quot;;</span></span>\n<span class="line"><span>    add_header X-Content-Type-Options &quot;nosniff&quot;;</span></span>\n<span class="line"><span>    add_header Strict-Transport-Security &quot;max-age=31536000; includeSubDomains&quot;;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 最大缓存文件</span></span>\n<span class="line"><span>    open_file_cache max=10000 inactive=20s;</span></span>\n<span class="line"><span>    open_file_cache_valid 30s;</span></span>\n<span class="line"><span>    open_file_cache_min_uses 1;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 允许url带有下划线</span></span>\n<span class="line"><span>    underscores_in_headers on;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 版本号隐藏</span></span>\n<span class="line"><span>    server_tokens off;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 客户端连接保持会话超时时间</span></span>\n<span class="line"><span>    keepalive_timeout 60;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 高效传输模式</span></span>\n<span class="line"><span>    send_timeout 15; </span></span>\n<span class="line"><span>    sendfile on;</span></span>\n<span class="line"><span>    tcp_nopush on;</span></span>\n<span class="line"><span>    tcp_nodelay on;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 压缩模式</span></span>\n<span class="line"><span>    gzip on;</span></span>\n<span class="line"><span>    gzip_min_length 2k;</span></span>\n<span class="line"><span>    gzip_buffers 4 16k;</span></span>\n<span class="line"><span>    gzip_http_version 1.0;</span></span>\n<span class="line"><span>    gzip_comp_level 2;</span></span>\n<span class="line"><span>    gzip_types text/plain application/x-javascript text/css application/xml; </span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 客户端超时时间</span></span>\n<span class="line"><span>    reset_timedout_connection on;</span></span>\n<span class="line"><span>    client_max_body_size  500m;</span></span>\n<span class="line"><span>    client_header_timeout 15;</span></span>\n<span class="line"><span>    client_body_timeout 15;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 反向代理时间</span></span>\n<span class="line"><span>    proxy_connect_timeout 60;</span></span>\n<span class="line"><span>    #后端服务器数据回传时间，就是在规定时间内后端服务器必须传完所有的数据</span></span>\n<span class="line"><span>    proxy_send_timeout 90;</span></span>\n<span class="line"><span>    #连接成功后，等候后端服务器响应时间，其实已经进入后端的排队之中等候处理</span></span>\n<span class="line"><span>    proxy_read_timeout 90;</span></span>\n<span class="line"><span>    proxy_buffers 4 32k;</span></span>\n<span class="line"><span>    proxy_busy_buffers_size 64k;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 代理传递</span></span>\n<span class="line"><span>    proxy_http_version 1.1;</span></span>\n<span class="line"><span>    proxy_intercept_errors on;</span></span>\n<span class="line"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>\n<span class="line"><span>    proxy_set_header Host $http_host;</span></span>\n<span class="line"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>\n<span class="line"><span>    proxy_set_header Connection &quot;upgrade&quot;;</span></span>\n<span class="line"><span>    proxy_set_header X-Forwarded-Proto $scheme;</span></span>\n<span class="line"><span>    proxy_set_header origin $http_origin;</span></span>\n<span class="line"><span>    proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>    # 后端服务定义</span></span>\n<span class="line"><span>    include conf.d/*.conf;</span></span>\n<span class="line"><span></span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="ngnix-服务代理配置" tabindex="-1"><a class="header-anchor" href="#ngnix-服务代理配置"><span>Ngnix 服务代理配置</span></a></h2><p>在<code>conf</code>目录下，创建：<code>conf.d</code> 目录，项目中的所有服务代理都在这里维护，最终的目录： <code>conf/conf.d</code>。</p><p><em>Note：</em></p><blockquote><p>需要在主配置进行导入该目录下的配置：<code>http{ include conf.d/*.conf;}</code></p></blockquote><p>后端服务配置（举例）：</p><div class="language-config line-numbers-mode" data-highlighter="shiki" data-ext="config" data-title="config" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>upstream backend {</span></span>\n<span class="line"><span>    server http://192.168.0.1:8080 weight=5;</span></span>\n<span class="line"><span>    server http://192.168.0.2:8080 weight=1;</span></span>\n<span class="line"><span>    server http://192.168.0.3:8080 weight=3;</span></span>\n<span class="line"><span>}</span></span>\n<span class="line"><span>server {</span></span>\n<span class="line"><span>    listen 8080;</span></span>\n<span class="line"><span>    server localhost;</span></span>\n<span class="line"><span>    location /api/ {</span></span>\n<span class="line"><span>        proxy_pass http://backend/;</span></span>\n<span class="line"><span>        // 其他配置</span></span>\n<span class="line"><span>    } </span></span>\n<span class="line"><span>}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="参考" tabindex="-1"><a class="header-anchor" href="#参考"><span>参考</span></a></h2><ul><li>https://nginx.org/en/docs/http/ngx_http_upstream_module.html</li></ul>',11)]))}]]),l=JSON.parse('{"path":"/ops/nginx/ng-conf.html","title":"Nginx 全局配置","lang":"zh-CN","frontmatter":{"title":"Nginx 全局配置","date":"2024-11-13T00:00:00.000Z","editLink":false,"category":["运维"],"tag":["Ngnix"],"description":"文件目录：[Nginx安装目录]/conf/nginx.conf。Ngnix 最常用命令：nginx -s reload 刷新配置。 Ngnix 主配置 Ngnix 服务代理配置 在conf目录下，创建：conf.d 目录，项目中的所有服务代理都在这里维护，最终的目录： conf/conf.d。 Note： 需要在主配置进行导入该目录下的配置：http...","head":[["meta",{"property":"og:url","content":"https://mister-hope.github.io/ops/nginx/ng-conf.html"}],["meta",{"property":"og:site_name","content":"Monk"}],["meta",{"property":"og:title","content":"Nginx 全局配置"}],["meta",{"property":"og:description","content":"文件目录：[Nginx安装目录]/conf/nginx.conf。Ngnix 最常用命令：nginx -s reload 刷新配置。 Ngnix 主配置 Ngnix 服务代理配置 在conf目录下，创建：conf.d 目录，项目中的所有服务代理都在这里维护，最终的目录： conf/conf.d。 Note： 需要在主配置进行导入该目录下的配置：http..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-11-20T04:10:46.000Z"}],["meta",{"property":"article:tag","content":"Ngnix"}],["meta",{"property":"article:published_time","content":"2024-11-13T00:00:00.000Z"}],["meta",{"property":"article:modified_time","content":"2024-11-20T04:10:46.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Nginx 全局配置\\",\\"image\\":[\\"\\"],\\"datePublished\\":\\"2024-11-13T00:00:00.000Z\\",\\"dateModified\\":\\"2024-11-20T04:10:46.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"HeRongqin\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"Ngnix 主配置","slug":"ngnix-主配置","link":"#ngnix-主配置","children":[]},{"level":2,"title":"Ngnix 服务代理配置","slug":"ngnix-服务代理配置","link":"#ngnix-服务代理配置","children":[]},{"level":2,"title":"参考","slug":"参考","link":"#参考","children":[]}],"git":{"createdTime":1731506832000,"updatedTime":1732075846000,"contributors":[{"name":"rongqin.he","email":"2012465448@qq.com","commits":1}]},"readingTime":{"minutes":1.63,"words":489},"filePathRelative":"ops/nginx/ng-conf.md","localizedDate":"2024年11月13日","excerpt":"<p>文件目录：<code>[Nginx安装目录]/conf/nginx.conf</code>。<strong>Ngnix 最常用命令：<code>nginx -s reload</code> 刷新配置。</strong></p>\\n<h2>Ngnix 主配置</h2>\\n<div class=\\"language-config line-numbers-mode\\" data-highlighter=\\"shiki\\" data-ext=\\"config\\" data-title=\\"config\\" style=\\"--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34\\"><pre class=\\"shiki shiki-themes one-light one-dark-pro vp-code\\"><code><span class=\\"line\\"><span>#user  root;</span></span>\\n<span class=\\"line\\"><span>worker_processes  4;</span></span>\\n<span class=\\"line\\"><span>worker_cpu_affinity auto;</span></span>\\n<span class=\\"line\\"><span>worker_rlimit_nofile 11000;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>error_log  logs/error.log warn;</span></span>\\n<span class=\\"line\\"><span>pid        logs/nginx.pid;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>events {</span></span>\\n<span class=\\"line\\"><span>    use epoll;</span></span>\\n<span class=\\"line\\"><span>    worker_connections  4096;</span></span>\\n<span class=\\"line\\"><span>    multi_accept on;</span></span>\\n<span class=\\"line\\"><span>}</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span># TCP 代理</span></span>\\n<span class=\\"line\\"><span>#stream {</span></span>\\n<span class=\\"line\\"><span>#</span></span>\\n<span class=\\"line\\"><span>#    upstream redis {</span></span>\\n<span class=\\"line\\"><span>#        server 10.x.x.x:6379;</span></span>\\n<span class=\\"line\\"><span>#    }</span></span>\\n<span class=\\"line\\"><span>#    server {</span></span>\\n<span class=\\"line\\"><span>#        listen     6378;</span></span>\\n<span class=\\"line\\"><span>#        proxy_pass redis;</span></span>\\n<span class=\\"line\\"><span>#    }</span></span>\\n<span class=\\"line\\"><span>#    upstream mysql {</span></span>\\n<span class=\\"line\\"><span>#        server 192.x.x.x:3306;</span></span>\\n<span class=\\"line\\"><span>#    }</span></span>\\n<span class=\\"line\\"><span>#    server {</span></span>\\n<span class=\\"line\\"><span>#        listen     3307;</span></span>\\n<span class=\\"line\\"><span>#        proxy_pass mysql;</span></span>\\n<span class=\\"line\\"><span>#    }</span></span>\\n<span class=\\"line\\"><span>#}</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>http {</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 文件扩展映射</span></span>\\n<span class=\\"line\\"><span>    include       mime.types;</span></span>\\n<span class=\\"line\\"><span>    default_type  application/octet-stream;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 日志格式化</span></span>\\n<span class=\\"line\\"><span>    log_format  main  \'$remote_addr - $remote_user [$time_local] \\"$request\\" \'</span></span>\\n<span class=\\"line\\"><span>                      \'$status $body_bytes_sent \\"$http_referer\\" \'</span></span>\\n<span class=\\"line\\"><span>                      \'\\"$http_user_agent\\" \\"$http_x_forwarded_for\\"\'</span></span>\\n<span class=\\"line\\"><span>                      \'$upstream_addr $upstream_status $upstream_response_time $request_time\';</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 防xss攻击</span></span>\\n<span class=\\"line\\"><span>    add_header X-Frame-Options \\"SAMEORIGIN\\";</span></span>\\n<span class=\\"line\\"><span>    add_header X-XSS-Protection \\"1; mode=block\\";</span></span>\\n<span class=\\"line\\"><span>    add_header X-Content-Type-Options \\"nosniff\\";</span></span>\\n<span class=\\"line\\"><span>    add_header Strict-Transport-Security \\"max-age=31536000; includeSubDomains\\";</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 最大缓存文件</span></span>\\n<span class=\\"line\\"><span>    open_file_cache max=10000 inactive=20s;</span></span>\\n<span class=\\"line\\"><span>    open_file_cache_valid 30s;</span></span>\\n<span class=\\"line\\"><span>    open_file_cache_min_uses 1;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 允许url带有下划线</span></span>\\n<span class=\\"line\\"><span>    underscores_in_headers on;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 版本号隐藏</span></span>\\n<span class=\\"line\\"><span>    server_tokens off;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 客户端连接保持会话超时时间</span></span>\\n<span class=\\"line\\"><span>    keepalive_timeout 60;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 高效传输模式</span></span>\\n<span class=\\"line\\"><span>    send_timeout 15; </span></span>\\n<span class=\\"line\\"><span>    sendfile on;</span></span>\\n<span class=\\"line\\"><span>    tcp_nopush on;</span></span>\\n<span class=\\"line\\"><span>    tcp_nodelay on;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 压缩模式</span></span>\\n<span class=\\"line\\"><span>    gzip on;</span></span>\\n<span class=\\"line\\"><span>    gzip_min_length 2k;</span></span>\\n<span class=\\"line\\"><span>    gzip_buffers 4 16k;</span></span>\\n<span class=\\"line\\"><span>    gzip_http_version 1.0;</span></span>\\n<span class=\\"line\\"><span>    gzip_comp_level 2;</span></span>\\n<span class=\\"line\\"><span>    gzip_types text/plain application/x-javascript text/css application/xml; </span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 客户端超时时间</span></span>\\n<span class=\\"line\\"><span>    reset_timedout_connection on;</span></span>\\n<span class=\\"line\\"><span>    client_max_body_size  500m;</span></span>\\n<span class=\\"line\\"><span>    client_header_timeout 15;</span></span>\\n<span class=\\"line\\"><span>    client_body_timeout 15;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 反向代理时间</span></span>\\n<span class=\\"line\\"><span>    proxy_connect_timeout 60;</span></span>\\n<span class=\\"line\\"><span>    #后端服务器数据回传时间，就是在规定时间内后端服务器必须传完所有的数据</span></span>\\n<span class=\\"line\\"><span>    proxy_send_timeout 90;</span></span>\\n<span class=\\"line\\"><span>    #连接成功后，等候后端服务器响应时间，其实已经进入后端的排队之中等候处理</span></span>\\n<span class=\\"line\\"><span>    proxy_read_timeout 90;</span></span>\\n<span class=\\"line\\"><span>    proxy_buffers 4 32k;</span></span>\\n<span class=\\"line\\"><span>    proxy_busy_buffers_size 64k;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 代理传递</span></span>\\n<span class=\\"line\\"><span>    proxy_http_version 1.1;</span></span>\\n<span class=\\"line\\"><span>    proxy_intercept_errors on;</span></span>\\n<span class=\\"line\\"><span>    proxy_set_header X-Real-IP $remote_addr;</span></span>\\n<span class=\\"line\\"><span>    proxy_set_header Host $http_host;</span></span>\\n<span class=\\"line\\"><span>    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span></span>\\n<span class=\\"line\\"><span>    proxy_set_header Connection \\"upgrade\\";</span></span>\\n<span class=\\"line\\"><span>    proxy_set_header X-Forwarded-Proto $scheme;</span></span>\\n<span class=\\"line\\"><span>    proxy_set_header origin $http_origin;</span></span>\\n<span class=\\"line\\"><span>    proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>    # 后端服务定义</span></span>\\n<span class=\\"line\\"><span>    include conf.d/*.conf;</span></span>\\n<span class=\\"line\\"><span></span></span>\\n<span class=\\"line\\"><span>}</span></span></code></pre>\\n<div class=\\"line-numbers\\" aria-hidden=\\"true\\" style=\\"counter-reset:line-number 0\\"><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div><div class=\\"line-number\\"></div></div></div>","autoDesc":true}')}}]);